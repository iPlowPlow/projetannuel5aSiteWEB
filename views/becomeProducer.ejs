<!-- views/becomeProducer.ejs -->
<!doctype html>
<html>
<head>
    <title>Devient producteur</title>
    <% include ./partials/header %>
</head>
<body >
<% include ./partials/navbar %>
<div class="container">
    <div class="col-sm-8 col-sm-offset-2 ">
        <% if (msgError.length > 0) { %>
            <div class="alert alert-danger"> <%= msgError %> </div>
        <% } %>
        <% if (msgSuccess.length > 0) { %>
            <div class="alert alert-success"> <%= msgSuccess %> </div>
        <% } %>
    </div>
</div>
<div class="container">
    <div class="col-sm-8 col-sm-offset-2 ">
        <h2>Devenir producteur : </h2>
        <form action="/becomeProducer" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label>Nom</label>
                <input type="text" class="form-control" name="lastName" value="<%= producer.lastNameProducer %>" required>
            </div>
            <div class="form-group">
                <label>Prénom</label>
                <input type="text" class="form-control"  value="<%= producer.firstNameProducer %>" name="firstName" required>
            </div>
            <div class="form-group">
                <label>Date de naissance</label>
                <input type="date" class="form-control"  value="<%= producer.birthProducer %>" name="birth" required>
            </div>
            <div class="form-group">
                <label>Sexe</label>
                <select name="sex">
                    <option></option>
                    <option value="H" name="sex" <% if (producer.sexProducer == "H") { %> selected <% } %> >H</option>
                    <option value="F" name="sex" <% if (producer.sexProducer == "F") { %> selected <% } %> >F</option>
                </select>  
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" class="form-control"  value="<%= producer.emailProducer %>" name="email" required>
            </div>
            <div class="form-group">
                <label>Numéro de téléphone</label>
                <input type="text" class="form-control"  value="<%= producer.phoneProducer %>" name="phone" required>
            </div>
            <div class="form-group">
                <label>Adresse</label>
                <input type="text" class="form-control"  value="<%= producer.addressProducer %>" name="address" required>
            </div>
            <div class="form-group">
                <label>Ville</label>
                <input type="text" class="form-control"  value="<%= producer.cityProducer %>" name="city" required>
            </div>
            <div class="form-group">
                <label>Code Postal</label>
                <input type="number" class="form-control"  value="<%= producer.cpProducer %>" name="cp" required>
            </div>
            <div class="form-group">
                <label>Photo (facultative) </label>
            </div>
            <div class="form-group">  
                <img src="img/avatar.png" / id="avatarImg" style="max-width: 300px;">
                <input type="file" name="avatar" id="fileAvatar" accept=".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff|images/*">
            </div>
            <div class="form-group">
                <label>Description</label>
                <textarea name="description" required><%= producer.descriptionProducer %></textarea>
            </div>
            <button type="submit" class="btn btn-lg ">Devenir Producteur</button>
            
        </form>
    </div>
    <script type="text/javascript">
        $("document").ready(function(){
            $("#fileAvatar").change(function() {
                readURL(this);
               
            });
        });

        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#avatarImg').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }else{
                $('#avatarImg').attr('src', "img/avatar.png");
            }
        }


    </script>
</div>
<% include ./partials/footer %>
</body>
</html>